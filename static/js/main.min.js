console.log("Main.js loaded"),$("#create-questionnaire").click(function(){console.log("Clicked..");var i={};i.text=$("#title").val(),i.description=$("#description").val(),i.questions=[],i.results=[],$(".question-wrapper").each(function(t){var e={};e.text=$(this).find(".text").val(),e.description=$(this).find(".description").val(),e.answers=[],$(this).find(".option").each(function(i){e.answers.push($(this).val())}),i.questions.push(e)}),$(".result").each(function(t){var e={};e.text=$(this).find(".text").val(),e.description=$(this).find(".description").val(),e.answer_set=$(this).find(".answer-set").val(),i.results.push(e)});var t={data:i};console.log(t),$.ajax({type:"POST",url:"/api/v1/questionnaires",data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(i){$("#status").find(".body").html("Questionnaire created!")}})}),$("#submit-answers").click(function(){var i="";$(".question").each(function(){i+=$(this).find("input[type=radio]:checked").val().toString(),i+=","}),i=i.slice(0,-1);var t={data:{answer_set:i}};console.log(t),$.ajax({type:"POST",url:"/api/v1/questionnaires/"+questionnaire_id,data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(i){console.log(i),$("#status").find(".head").html(i.data.text),$("#status").find(".body").html(i.data.description)}})}),$("#login").click(function(){console.log("Login started");var i={data:{email:$("#email").val(),password:$("#password").val()}};console.log(i),$.ajax({type:"POST",url:"/ajax/login",data:JSON.stringify(i),contentType:"application/json",dataType:"json",success:function(i){console.log(i),$("#status-login").show().find(".alert").text(i.message),location.reload()}})}),$("#register").click(function(){console.log("Registration started");var i={data:{name:$("#name").val(),email:$("#new-email").val(),password:$("#new-password").val()}};console.log(i),$.ajax({type:"POST",url:"/ajax/register",data:JSON.stringify(i),contentType:"application/json",dataType:"json",success:function(i){console.log(i),$("#status-reg").show().find(".alert").text(i.message),$("#account-exists").hide()}})}),$("#upvote, #downvote").click(function(i){if("upvote"==$(i.target).attr("id")){console.log("Upvoting");var t=1}else{console.log("Downvoting");var t=-1}var e={data:{vote:t}};console.log(e),$.ajax({type:"POST",url:"/api/v1/questionnaires/"+questionnaire_id+"/vote",data:JSON.stringify(e),contentType:"application/json",dataType:"json",success:function(i){1==t?$("#upvote").val("Upvoted!").attr("data-voted","true"):$("#downvote").val("Downvoted!").attr("data-voted","true"),console.log(i)}})});var max_questions_count=20,max_options_count=6;$("div.questions").on("click","div.option-add",function(){var i=$(this).closest(".question-wrapper").find(".option").length,t='<div class="option"> <div class="col-md-8"> <span class="input input--ruri"> <input class="input__field input__field--ruri" type="text" id="title"/> <label class="input__label input__label--ruri" for="input-26"> <span class="input__label-content input__label-content--ruri"><i class="fa fa-circle-thin"></i> Option '+(i+1)+'</span> </label> </span> </div><div class="col-md-2 option-del"> <i class="fa fa-times-circle fa-2x" title="Remove"></i> </div></div>';i<max_options_count-1?$(this).prev().before(t):($(this).prev().before(t),$(this).hide())}),$("div.questions").on("click","div.option-del",function(){var i=$(this).closest(".question-wrapper").find(".option-add");i.is(":visible")||i.show(),$(this).closest(".option").remove()}),$(".question-add").click(function(){var i=$(this).closest(".questions").find(".question-wrapper").length,t='<div class="question-wrapper"> <div class="question col-md-11"> <span class="input input--ruri"> <input class="input__field input__field--ruri" type="text" id="title"/> <label class="input__label input__label--ruri" for="input-26"> <span class="input__label-content input__label-content--ruri">Question '+(i+1)+'</span> </label> </span> </div><div class="question-del col-md-1"> <i class="fa fa-times-circle fa-2x" title="Remove Question"></i> </div><div class="options col-md-12"> <div class="option"> <div class="col-md-8"> <span class="input input--ruri"> <input class="input__field input__field--ruri" type="text" id="title"/> <label class="input__label input__label--ruri" for="input-26"> <span class="input__label-content input__label-content--ruri"><i class="fa fa-circle-thin"></i> Option 1</span> </label> </span> </div><div class="col-md-2 option-del"> <i class="fa fa-times-circle fa-2x" title="Remove"></i> </div></div><div class="clearfix"></div><div class="col-md-2 option-add"> <i class="fa fa-plus-circle"></i> Add Option </div></div></div><hr class="divider">';i<max_questions_count-1?$(this).before(t):($(this).before(t),$(this).hide())}),$("div.questions").on("click","div.question-del",function(){var i=$(this).closest(".question-wrapper"),t=$(this).closest(".questions").find(".question-add");t.is(":visible")||t.show(),i.next().remove(),i.remove()}),$(".result-add").click(function(){var i=$(this).closest(".results").find(".result-wrapper").length,t='<div class="result-wrapper result"> <div class="col-md-8"> <span class="input input--ruri"> <input class="input__field input__field--ruri" type="text" id="title"/> <label class="input__label input__label--ruri" for="input-26"> <span class="input__label-content input__label-content--ruri">Result '+(i+1)+'</span> </label> </span> </div><div class="result-del col-md-1"> <i class="fa fa-times-circle fa-2x" title="Remove Result"></i> </div><div class="col-md-12"> <span class="input input--ruri"> <input class="input__field input__field--ruri" type="text" id="title"/> <label class="input__label input__label--ruri" for="input-26"> <span class="input__label-content input__label-content--ruri">Description</span> </label> </span> </div><div class="col-md-12"> <span class="input input--ruri"> <input class="input__field input__field--ruri" type="text" id="title"/> <label class="input__label input__label--ruri" for="input-26"> <span class="input__label-content input__label-content--ruri">Answer set (Eg: 3,2,3)</span> </label> </span> </div></div><hr class="divider">';$(this).before(t)}),$("div.results").on("click","div.result-del",function(){var i=$(this).closest(".result-wrapper");i.next().remove(),i.remove()}),function(){String.prototype.trim||function(){var i=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(i,"")}}(),[].slice.call(document.querySelectorAll("input.input__field")).forEach(function(i){""!==i.value.trim()&&classie.add(i.parentNode,"input--filled")}),$("body").on("focus","input.input__field",function(){$(this).parent().addClass("input--filled")}),$("body").on("blur","input.input__field",function(){console.log("clicked"),console.log($(this)),0===$(this).val().length&&$(this).parent().removeClass("input--filled")})}();